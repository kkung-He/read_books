# ν”„λ΅μ‹(proxy) ν¨ν„΄ μ΄ν•΄ν•κΈ° :star2:
 
 </br>
 </br>
 
 
## π― μλ„ 
> ν”„λ΅μ‹ : λ€λ¦¬μΈ , μ¦‰ λ¬΄μ–Έκ°€λ¥Ό λ€μ‹  μ²λ¦¬ν•λ” μλ―Έ -> λΉ„μ„ </p>
> μ‚¬μ¥λ‹ν•ν… λ¬Όμ–΄λ³΄κΈ° μ „μ— λΉ„μ„μ—κ² λ¬Όμ–΄λ³΄μ„Έμ”! </p>
> μ–΄λ–¤ κ°μ²΄λ¥Ό μ‚¬μ©ν•κ³ μ ν• λ• κ°μ²΄λ¥Ό μ§μ ‘μ μΌλ΅ μ°Έμ΅°ν•λ” κ²ƒμ΄ μ•„λ‹λΌ ν•΄λ‹Ή κ°μ²΄λ¥Ό λ€ν–‰ν•λ” κ°μ²΄λ¥Ό ν†µν•΄ λ€μƒ κ°μ²΄μ— μ ‘κ·Όν•λ” λ°©μ‹ </p>
> μ΄λ¥Ό ν†µν•΄ ν•΄λ‹Ή κ°μ²΄κ°€ λ©”λ¨λ¦¬μ— μ΅΄μ¬ν•μ§€ μ•μ•„λ„ κΈ°λ³Έμ  μ •λ³΄λ¥Ό μ°Έμ΅°ν•κ±°λ‚ μ„¤μ • ν•  μ μμΌλ©° </p>
> λν• μ‹¤μ  κ°μ²΄μ κΈ°λ¥μ΄ λ°λ“μ‹ ν•„μ”ν• μ‹μ κΉμ§€ κ°μ²΄μ μƒμ„±μ„ λ―Έλ£° μ μλ‹¤. </p>
 
 </br>
 </br>
 


## β… RMI

<img width="637" alt="RMIα„‹α…µα„’α…Ά" src="https://user-images.githubusercontent.com/98209409/179329763-562baf63-b500-4bff-8e5a-1c3d64101794.png">

μ¶μ²: https://bb-dochi.tistory.com/84
 
</br>
 
> ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” μ›κ²© κ°μ²΄μ λ©”μ†λ“ νΈμ¶ν•λ‹¤κ³  μƒκ°ν•κ³  μ‘μ—… μ²λ¦¬ν•λ‹¤ </p>
> ν•μ§€λ§ μ‹¤μ λ΅λ” λ΅μ»¬ ν™μ— λ“¤μ–΄μλ” ν”„λ΅μ‹ κ°μ²΄(ν΄λΌμ΄μ–ΈνΈ λ³΄μ΅° κ°μ²΄)μ λ©”μ†λ“λ¥Ό νΈμ¶ν•κ³  μλ‹¤. </p>
> ν”„λ΅μ‹λ” λ©”μ†λ“ νΈμ¶μ •λ³΄(μΈμ, λ©”μ†λ“ μ΄λ¦„ λ“±)λ¥Ό μ ν¬μ¥ν•΄μ„ λ„¤νΈμ›ν¬λ΅ μ„λΉ„μ¤ λ³΄μ΅° κ°μ²΄μ—κ² μ „λ‹¬ν•λ‹¤.</p>
> μ„λ²„ μ½μ—μ„  μ„λΉ„μ¤ λ³΄μ΅° κ°μ²΄κ°€ μ”μ²­μ„ λ°›κ³  ν•΄μ„ν•΄ μ‹¤μ  μ„λΉ„μ¤ κ°μ²΄μ— μλ” λ©”μ†λ“ νΈμ¶, λ¦¬ν„΄κ°’(ν¬μ¥λ κ²°κ³Ό)μ„ μ „μ†΅ν•λ‹¤. </p>

</br>

μλ°”RMI
> ν΄λΌμ΄μ–ΈνΈ μ„λΉ„μ¤ λ³΄μ΅° κ°μ²΄ ( = RMI μ¤ν… ) + μ„λΉ„μ¤ λ³΄μ΅° κ°μ²΄ ( = RMI μ¤μΌλ ν†¤) μ„ λ§λ“¤μ–΄μ¤ </p>
> μ‚¬μ©μ‹ λ„¤νΈμ›ν‚Ή λ° μ…μ¶λ ¥ κ΄€λ ¨ μ½”λ“λ¥Ό μ§μ ‘ μ‘μ„±ν•μ§€ μ•μ•„λ„ λ¨ </p>
> ν΄λΌμ΄μ–ΈνΈμ—μ„ μ›κ²© κ°μ²΄μ— μ ‘κ·Όν•  μ μλ” λ£©μ—… μ„λΉ„μ¤ μ κ³µ </p>
> ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„  λ΅μ»¬ λ©”μ†λ“ νΈμ¶κ³Ό λ™μΌ λ°©μ‹μΌλ΅ μ‚¬μ©ν•λ©΄ λμ§€λ§, μ‹¤μ λ΅  λ„¤νΈμ›ν‚Ή λ° μ…μ¶λ ¥ κΈ°λ¥μ΄ ν™μ©λκ³  μμΌλ―€λ΅¤ μμ™Έμ²λ¦¬ μ¤‘μ” </p>

</br>
</br>

## β… μ›κ²© μ„λΉ„μ¤ λ§λ“¤κΈ° 

</br>

### 1λ‹¨κ³„ : μ›κ²© μΈν„°νμ΄μ¤ λ§λ“¤κΈ°
> ν΄λΌμ΄μ–ΈνΈμ—μ„ μ›κ²©μΌλ΅ νΈμ¶ν•  μ μλ” λ©”μ†λ“ μ •μ  </p>
> ν΄λΌμ΄μ–ΈνΈμ—μ„ μ΄ μΈν„°νμ΄μ¤λ¥Ό μ„λΉ„μ¤ ν΄λμ¤ ν•μ‹μΌλ΅ μ‚¬μ© -> μ¤ν…κ³Ό μ‹¤μ  μ„λΉ„μ¤μ— μ΄ μΈν„°νμ΄μ¤ κµ¬ν„ν•΄μ•Ό ν•¨  </p>
</br>

>> 1. java.rmi.Remoteλ¥Ό λ°λ“μ‹ ν™•μ¥ν•μ—¬ μ›κ²© μΈν„°νμ΄μ¤ μ •μ. </p>
>> Remoteλ” ν‘μ‹μ©(marker) μΈν„°νμ΄μ¤λ‚ λ©”μ†λ“κ°€ μ—†μ§€λ§ RMIμ—μ„λ” νΉλ³„!  </p>
>> 2. λ¨λ“  λ©”μ†λ“λ¥Ό RemoteExceptionμ„ λμ§€λ„λ΅ μ„ μ–Έ - λ„¤νΈμ›ν‚Ή, μ…μ¶λ ¥ μ‘μ—… μ¤‘ μƒκΈΈ μ μλ” μμ™Έ μ²λ¦¬λ¥Ό μ„ν•¨ </p>
>> 3. μ›κ²© λ©”μ†λ“μ μΈμμ™€ λ¦¬ν„΄κ°’μ€ λ°λ“μ‹ μ›μ‹ ν•μ‹(primitive) λλ” Serializable ν•μ‹μΌλ΅ μ„ μ–Έ </p>
>> λ©”μ†λ“μ μΈμλ“¤μ€ λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ μ „λ‹¬λμ–΄ μ§λ ¬ν™”λ¥Ό ν†µν•΄ ν¬μ¥λ  κ²ƒ </p>
>> μ¦‰ μ›μ‹ ν•μ‹μ΄ μ•„λ‹ μ§μ ‘ λ§λ“  ν•μ‹μ„ μ‚¬μ©ν•λ‹¤λ©΄ ν΄λμ¤λ¥Ό λ§λ“¤ λ• Serialize μΈν„°νμ΄μ¤ κµ¬ν„ </p>

</br>

### 2λ‹¨κ³„ : μ„λΉ„μ¤ κµ¬ν„ ν΄λμ¤ μƒμ„±
> μ‹¤μ  μ‘μ—…μ„ ν•λ” ν΄λμ¤, λ‚μ¤‘μ— ν΄λΌμ΄μ–ΈνΈμ—μ„ μ΄ κ°μ²΄μ— μλ” λ©”μ†λ“ νΈμ¶ ex) GumballMachine </p>
> 1λ²μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ•Ό ν•¨ </p>
</br>

>> 1. μ„λΉ„μ¤ ν΄λμ¤μ— μ›κ²© μΈν„°νμ΄μ¤ κµ¬ν„ <- ν΄λΌμ΄μ–ΈνΈκ°€ μΈν„°νμ΄μ¤μ λ©”μ†λ“λ¥Ό νΈμ¶ν•  κ²ƒμ„ </p>
>> 2. UnicastRemoteObjectλ¥Ό ν™•μ¥ -> μ›κ²© μ„λΉ„μ¤ κ°μ²΄ μ—­ν• μ„ ν•λ ¤λ©΄ κ°μ²΄μ— 'μ›κ²© κ°μ²΄'κΈ°λ¥μ„ μ¶”κ°€ν•΄μ•Όν•¨ </p>
>> κ°€μ¥ κ°„λ‹¨ν• λ°©λ²•μ΄ java.rmi.server ν¨ν‚¤μ§€μ— μλ” UnicastRemoteObjectλ¥Ό ν™•μ¥ν•΄μ„ μνΌ ν΄λμ¤ μ κ³µν•λ” κΈ°λ¥μΌλ΅ μ²λ¦¬ν•κΈ° μ„ν•¨ </p>
>> 3. RemoteExceptionμ„ μ„ μ–Έν•λ” μƒμ„±μ κµ¬ν„ </p>
>> μ–΄λ–¤ ν΄λμ¤κ°€ μƒμ„±λ  λ• κ·Έ μνΌν΄λμ¤μ μƒμ„±μλ„ λ°λ“μ‹ νΈμ¶λλ―€λ΅ μνΌν΄λμ¤ μƒμ„±μκ°€ μ–΄λ–¤ μμ™Έλ¥Ό λμ§„λ‹¤λ©΄ </p>
>> μ„λΈ ν΄λμ¤ μƒμ„±μλ„ κ·Έ μμ™Έλ¥Ό μ„ μ–Έν•΄μ•Ό ν•λ‹¤. ex) public MyRemoteImpl() throws RemoteException{} </p>
>> 4. μ„λΉ„μ¤λ¥Ό RMI λ μ§€μ¤νΈλ¦¬μ— λ“±λ΅ </p>
>> java.rmi.Namingμ— μλ” rebind()λ©”μ†λ“λ¥Ό ν†µν•΄ λ“±λ΅ </p>
>> RMI λ μ§€μ¤νΈλ¦¬λ¥Ό ν†µν•΄ μ„λΉ„μ¤λ¥Ό κ²€μƒ‰ν•  λ• μ—¬κΈ°μ„ λ“±λ΅ν• μ΄λ¦„μΌλ΅ μ‚¬μ© </p>

</br>

### 3λ‹¨κ³„ : RMI λ μ§€μ¤νΈλ¦¬ (rmiregistry) μ‹¤ν–‰ν•κΈ°
> μ „ν™”λ²νΈλ¶€μ™€ λΉ„μ·, ν΄λΌμ΄μ–ΈνΈλ” μ΄ λ μ§€μ¤νΈλ¦¬λ΅λ¶€ν„° ν”„λ΅μ‹(μ¤ν…, ν΄λΌμ΄μ–ΈνΈ λ³΄μ΅° κ°μ²΄)λ¥Ό λ°›μ•„ κ° </p>
> rmiregistry λ…λ Ήμ–΄ μƒ ν„°λ―Έλ„ μ°½μ—μ„ μ‹¤ν–‰ </p>

</br>

### 4λ‹¨κ³„ : μ›κ²© μ„λΉ„μ¤ μ‹¤ν–‰
> μ„λΉ„μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ—μ„ μ„λΉ„μ¤ μΈμ¤ν„°μ¤λ¥Ό λ§λ“¤κ³  κ·Έ μΈμ¤ν„΄μ¤λ¥Ό RMI λ μ§€μ¤νΈλ¦¬μ— λ“±λ΅ => ν΄λΌμ΄μ–΄νΈμ—μ„ μ‚¬μ© κ°€λ¥ν•΄μ§ </p>
> μ¤ν…κ³Ό μ¤μΌλ ν†¤μ€ λ³΄μ΄μ§€ μ•λ” κ³³μ—μ„ λ™μ μΌλ΅ μƒμ„±λλ‹¤. </p>
> java MyServiceImp1 λ‹¤λ¥Έ ν„°λ―Έλ„ μ—΄μ–΄ μ‹¤ν–‰ </p>

</br>

### μ›κ²© μ„λΉ„μ¤ μ‹μ‘
> μ„λΉ„μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤κ³  RMI λ μ§€μ¤νΈλ¦¬μ— λ“±λ΅
> λ“±λ΅ ν›„μ—” ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ© κ°€λ¥

</br>
</br>

## β… μ›κ²© ν”„λ΅μ‹, κ°€μƒ ν”„λ΅μ‹, λ³΄νΈ ν”„λ΅μ‹

</br>

### μ›κ²© ν”„λ΅μ‹ 
> μ›κ²© κ°μ²΄(λ‹¤λ¥Έ JVMμ— λ“¤μ–΄μλ” κ°μ²΄)μ— λ€ν• μ ‘κ·Όμ„ μ μ–΄ ν•  μ μλ‹¤. </p>
> μ›κ²© ν”„λ΅μ‹μ λ©”μ†λ“λ¥Ό νΈμ¶ν•κ² λλ©΄ λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ μ „λ‹¬λμ–΄ μ›κ²© κ°μ²΄μ λ©”μ†λ“κ°€ νΈμ¶λλ©° μ΄λ¬ν• κ²°κ³Όλ” λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬λ©λ‹λ‹¤.

</br>

<img width="700" alt="α„‹α…―α†«α„€α…§α†¨α„‘α…³α„…α…©α†¨α„‰α…µ" src="https://user-images.githubusercontent.com/98209409/179258892-473661e3-55a8-4916-afed-8262280e9a39.png">

μ¶μ² : https://plposer.tistory.com/31    </p>

</br>
</br>


### κ°€μƒ ν”„λ΅μ‹ 
> μƒμ„±ν•κΈ° νλ“  μμ›μ— λ€ν•΄ μ ‘κ·Όμ„ μ μ–΄ ν•  μ μλ‹¤. </p>
> μ‹¤μ  κ°μ²΄μ μ‚¬μ© μ‹μ μ„ μ μ–΄ ν•  μ μλ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ μ²μ μ”μ²­ λ° μ ‘κ·Ό ν•  λ•λ§ μ‹¤μ²΄ κ°μ²΄κ°€ μƒμ„±λλ©° </p>
> μ΄ν›„λ” ν”„λ΅μ‹λ¥Ό μ°Έμ΅°ν•μ—¬ μ‹¤μ  κ°μ²΄λ¥Ό λ€μ‹  ν•  μ μλ‹¤. </p>

</br>

<img width="700" alt="α„€α…΅α„‰α…΅α†Όα„‘α…³α„…α…©α†¨α„‰α…µ" src="https://user-images.githubusercontent.com/98209409/179261011-19c9002a-4849-41b2-acb6-9ce1a3969dec.png">

</br>
</br>

### λ³΄νΈ ν”„λ΅μ‹ 
> μ ‘κ·Ό κ¶ν•μ΄ ν•„μ”ν• μμ›μ— λ€ν• μ ‘κ·Όμ„ μ μ–΄ ν•  μ μλ‹¤.


## β… μμ  : GumballMachine ν΄λμ¤λ¥Ό μ›κ²© μ„λΉ„μ¤λ΅ λ°”κΎΈκΈ° 

1. GumballMachineμ© μ›κ²© μΈν„°νμ΄μ¤ μ •μ </p>
> μ›κ²© ν΄λΌμ΄μ–ΈνΈμ—μ„ νΈμ¶ ν•  μ μλ” λ©”μ†λ“ μ •μ </p>
</br>

```java

import java.rmi.*; // λΉΌλ¨Ήμ§€ λ§μ!

//μ›κ²© μΈν„°νμ΄μ¤
public interface GumballMachineRemote extends Remote{
    public int getCount() throws RemoteException;
    public String getLocation() throws RemoteException;
    public State getState() throws RemoteException;
    //λ¨λ“  λ¦¬ν„΄ ν•μ‹μ€ μ›μ‹ ν•μ‹ λλ” Serializableμ΄μ–΄μ•Ό ν•λ‹¤.
    // μ§€μ›ν•΄μ•Ό ν•λ” λ©”μ†λ“ λ¨λ‘ RemoteExceptionμ„ λμ§ μ μλ‹¤.
}

 ```
</br> 

2. μΈν„°νμ΄μ¤μ λ¨λ“  λ¦¬ν„΄ ν•μ‹μ„ μ§λ ¬ν™” ν•  μ μλ”μ§€ ν™•μΈ </p>
> State ν•μ‹μ€ μ§λ ¬ν™”κ°€ μ•λλ―€λ΅ μμ • - > Serializable μΈν„°νμ΄μ¤λ¥Ό ν™•μ¥ν•΄ ν•΄κ²° </p>
> State ν΄λμ¤μ— GumballMachineμ— λ€ν• λ νΌλ°μ¤κ°€ μλ”λ° μ΄λ¥Ό ν¬ν•¨ν•΄ μ§λ ¬ν™” ν•λ”κ²ƒμ€ λ°”λμ§ ν•μ§€ μ•μ </p>
> -> κ° Stateμ— μλ” GumballMachine μΈμ¤ν„΄μ¤ λ³€μμ— transient ν‚¤μ›λ“ μ¶”κ°€ </p>
> -> ν•΄κ²°μ‹, ν•΄λ‹Ή ν•„λ“λ” μ§λ ¬ν™” λμ§€ μ•μΌλ‚ μ§λ ¬ν™”ν•΄μ„ λ°›μ€ λ’¤ νΈμ¶ν•λ©΄ λ¬Έμ κ°€ λ°μƒ ν•  μλ„ μλ‹¤. </p>

</br>

```java

import java.io.*; //Serializableμ€ java.io ν¨ν‚¤μ§€μ— λ“¤μ–΄μλ‹¤

public interface State extends Serializable{ //μ•„λ¬΄ λ©”μ†λ“λ„ μ—†λ” Serializable μΈν„°νμ΄μ¤λ¥Ό ν™•μ¥
                                             // μ΄λ¬λ©΄ Stateμ μ„λΈ ν΄λμ¤λ¥Ό μ§λ ¬ν™”ν•΄μ„ λ„¤νΈμ›ν¬ μ „μ†΅ κ°€λ¥
  public void insertQuarter();
  public void ejectQuarter();
  public void turnCrank();
  public void dispense();
  
}


public class NoQuarterState implements State{

    private static final long serialVersionUID = 2L;
    //transient ν‚¤μ›λ“λ΅ ν•΄λ‹Ή ν•„λ“λ” μ§λ ¬ν™” λμ§€ μ•λ„λ΅ ν•¨
    transient GumballMachine gumballMachine;
    
    //κΈ°νƒ€ λ©”μ†λ“..
}

```

</br> 

3. κµ¬μƒ ν΄λμ¤μ—μ„ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ 
> GumballMachineμ΄ μ„λΉ„μ¤ μ—­ν• κ³Ό λ„¤νΈμ›νΈ μ”μ²­μ„ μ²λ¦¬ ν•  μ μλ„λ΅ μμ •  </p>

```java

import java.rmi.*;    // μ„ν¬νΈ
import java.rmi.server.*;

public class GumballMachine 
   extends UnicastRemoteObject implements GumballMachineRemote 
   //GumballMachine ν΄λμ¤λ¥Ό UnicastRemoteObjectμ μ„λΈ ν΄λμ¤λ΅ λ§λ“¤μ–΄μ•Ό μ›κ²© μ„λΉ„μ¤ μ—­ν• μ„ ν•  μ μλ‹¤.
{
    private static final long serialVersionUID = 2L;
    //κΈ°νƒ€ μΈμ¤ν„΄μ¤ λ³€μ ..
   
    public GumballMachine(String location, int numberGumballs) throws RemoteException{
        //μνΌν΄λμ¤μ—μ„ RemoteException λ¥Ό λμ§ μ μκΈ° λ•λ¬Έμ—
        //ν•΄λ‹Ή μƒμ„±μμ—μ„λ„ λμ§ μ μμ–΄μ•Ό ν•λ‹¤.
        
        //μƒμ„±μ μ½”λ“
    }
    
    public int getCount() {
      return count;
    }
    
    public int getState() {
      return state;
    }

    public int getLocat() {
      return location;
    }
    
    //κΈ°νƒ€ λ©”μ†λ“ ..
    
```

</br>
</br>

4. RMI λ μ§€μ¤νΈλ¦¬ λ“±λ΅
</br>

5. ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μμ • 
> GumballMachine -> GumballMachineRemote
> λ½‘κΈ° κΈ°κ³„μ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤ λ• ν•­μƒ try/ catchλ¬ΈμΌλ΅ κ°μ‹ΈκΈ° 

</br>
</br>
